# [スーパーノート日記アプリ](https://takashi-home.github.io/Supernote/)

毎日の目標達成度を⭕✖△で記録し、GitHubでセキュアに管理できる日記アプリケーションです。

## 主な機能

### 📝 日記管理
- **週間目標設定**: 週ごとの目標を設定
- **日別評価**: カスタマイズ可能な評価項目
- **3段階評価**: ⭕（達成）、✖（未達成）、△（まあまあ）
- **感想・気づき**: 各日の振り返りをテキストで記録

### 📊 ビュー機能
- **日別表示**: 1日ずつ集中して入力（スクロール最小化）
- **週間サマリー**: 7日分の達成度を一目で確認
- **プレビュー表示**: 評価項目×日付の表形式で週間レポート表示

### 💾 データ管理
- **GitHub同期**: Personal Access TokenでプライベートリポジトリにJSON保存
- **自動保存**: 2分ごとの自動保存機能
- **手動保存**: 保存ボタンで即座に同期
- **未保存検知**: 変更があると保存ボタンが「💾 保存 *」に変化
- **更新時の警告**: 未保存の変更がある場合、ブラウザ更新時に警告
- **設定の永続化**: GitHub設定はlocalStorageに保存（再入力不要）

### 📤 エクスポート機能
- **クリップボードコピー**: 
  - 評価表（TSV形式）- Slackに貼り付けると表として認識
  - 感想・気づき（日付付き）
  - 画像コピー - クリップボードに画像をコピー（スマホ対応）
- **画像出力**: PNG形式で週間レポートをダウンロード
- **印刷**: ブラウザの印刷機能でPDF化可能
- **日別出力**: その日の記録を上記各形式で出力
### 👪 親からのコメント機能
- **週間コメント欄**: 週に1回、親御さんからのコメントを記録
- **表示/非表示切替**: 使わない場合は非表示にできる
- **状態の保存**: 表示設定はlocalStorageに保存

### ⚙️ カスタマイズ
- **評価項目管理**: 項目の追加・削除・並び替え
- **デフォルト復元**: 初期設定にワンクリックで戻す
- **設定の永続化**: GitHubトークンやリポジトリ情報を保存

## セットアップ手順

### 1. プライベートリポジトリの作成

1. GitHubで新しいプライベートリポジトリを作成
2. リポジトリ名は任意（例: `diary-data`）

### 2. Personal Access Tokenの生成

1. GitHub Settings → Developer settings → Personal access tokens → Tokens (classic)
2. "Generate new token" をクリック
3. スコープはContentsのread and write
4. トークンをコピーして保存（後で使用）

### 3. アプリケーションの設定

1. アプリを開く（GitHub Pagesまたはローカル）
2. 初回起動時に設定画面が表示される
3. 以下を入力：
   - **GitHubトークン**: 生成したPersonal Access Token
   - **リポジトリ所有者**: あなたのGitHubユーザー名
   - **リポジトリ名**: 作成したプライベートリポジトリ名
4. 「接続テスト」で接続を確認
5. 「設定保存」をクリック

### 4. 評価項目のカスタマイズ（任意）

1. 設定画面で評価項目を編集
2. 不要な項目を削除、必要な項目を追加
3. ドラッグ＆ドロップで並び替え可能(未実装)
4. データのない新規週は直前に表示されていた週の項目を表示
## 使い方

### 基本操作

#### 日記の入力
1. **今週の目標**: 週の始めに目標を入力
2. **日付選択**: 週間サマリーまたは日別ナビゲーションで日を選択
3. **評価入力**: 各項目について⭕✖△をクリック
4. **感想記入**: その日の振り返りを記入
5. **保存**: 自動保存されるが、手動でも保存可能
6. 保存失敗と出る場合はページを更新してみるといいかも
#### 週の切り替え
- 「← 前週」「次週 →」ボタンで週を移動
- 自動的に該当週のデータを読み込み

#### データの共有
1. **Slackに貼り付け**:
   - 「📋 評価表」をクリック
   - Slackに貼り付けると表形式で表示される
   - 「📋 感想」で感想だけをコピー可能
   - PC版Slackで動作を確認。スマホのSlackアプリは表貼り付けに非対応の可能性あり

2. **画像として共有**:
   - 「📷 画像」をクリック
   - PNG画像としてダウンロード
   - SNSやチャットで共有可能

3. **PDFとして保存**:
   - 「🖨️ 印刷」をクリック
   - 印刷ダイアログで「PDFとして保存」を選択

### 画面構成

```
┌─────────────────────────────┐
│ スーパーノート日記アプリ     │
├─────────────────────────────┤
│ 今週の目標（テキストエリア） │
├─────────────────────────────┤
│ [日記入力][プレビュー][設定] │ ← タブ
├─────────────────────────────┤
│ [← 前週] 2025-W42 [次週 →]   │
├─────────────────────────────┤
│ [💾保存][📋評価表][📋感想]   │
│ [�画像コピー][�📷画像][🖨️印刷]│
├─────────────────────────────┤
│ 【日別ナビゲーション】       │
│  [◀ 前日] 10/15(火) [次日 ▶] │
├─────────────────────────────┤
│ 【その日の評価入力】         │
│  項目1: ⭕ ✖ △ (再クリックで解除)│
│  項目2: ⭕ ✖ △              │
│  ...                         │
│ 【感想・気づき】             │
│  （テキストエリア）          │
├─────────────────────────────┤
│ 【今週の記録】（7日分）      │
│  各日の⭕✖△カウント表示     │
├─────────────────────────────┤
│ 【親からのコメント欄】       │
│ [�表示/非表示切替ボタン]    │
│  （週1回のコメント記入欄）   │
├─────────────────────────────┤
│ [�💾保存][📋評価表][📋感想]   │ ← 下部にも配置
│ [📋画像コピー][📷画像][🖨️印刷]│
└─────────────────────────────┘
```

## データフォーマット

### 週データ (JSON)
```json
{
  "week": "2025-W42",
  "goal": "毎日運動する",
  "evaluationItems": ["項目1", "項目2", ...],
  "parentsComment": "親からのコメント（週1回）",
  "dailyRecords": [
    {
      "date": "2025-10-14",
      "dayOfWeek": "月",
      "responses": {
        "項目1": "⭕️",
        "項目2": "✖️"
      },
      "reflection": "今日の感想..."
    }
  ]
}
```

### 保存場所
- **GitHub**: `data/weeks/2025-W42.json` (メインストレージ)
- **localStorage**: GitHub設定のみ保存（weekDataは保存しない）

## 技術スタック

- **フロントエンド**: 
  - Vanilla JavaScript (ES6+)
  - HTML5
  - CSS3 (CSS Variables, Grid, Flexbox)
  
- **外部ライブラリ**:
  - html2canvas v1.4.1 (画像出力)
  
- **API連携**:
  - GitHub REST API v3 (Contents API)
  - Clipboard API (コピー機能)
  
- **ストレージ**:
  - GitHub (プライベートリポジトリ)
  - localStorage (バックアップ・設定)

## ファイル構成

```
Supernote/
├── index.html          # メインHTML
├── app.js              # アプリケーションロジック
├── ui-renderer.js      # UI描画・レンダリング
├── github-sync.js      # GitHub API連携
├── style.css           # スタイルシート
├── README.md           # このファイル
├── LICENSE             # ライセンス
├── data/               # ローカルデータ（開発用）
└── logs/               # 開発ログ
    ├── mikis_log.md    # 編集履歴
    └── PROJECT_OVERVIEW.md
```

## ブラウザ対応

- **推奨**: 
  - Chrome 90+
  - Edge 90+
  - Safari 14+
  - Firefox 88+

- **モバイル**:
  - iOS Safari 14+
  - Android Chrome 90+

## トラブルシューティング

### 誤った項目データを保存してしまった。
- 一つ一つ編集するのが面倒な時は、設定→週データ削除ができます。 
### データが保存されない
1. GitHubトークンの有効期限を確認
2. リポジトリ名・所有者名が正しいか確認
3. 「接続テスト」で接続状態を確認
4. ブラウザのコンソールでエラーメッセージを確認

### 保存ボタンが「* 保存」のまま
1. 手動で「保存」ボタンをクリック
2. ネットワーク接続を確認
3. GitHubの接続状態を確認

### スマホで画像が正しく出力されない
- 画像は固定幅1400pxで生成されるため、スマホでも全体が表示されます
- ダウンロードした画像を確認してください

### Slackで表として認識されない
- TSV形式（タブ区切り）でコピーされるため、通常は自動認識されます
- うまくいかない場合は、コピー後に画像形式で共有してください

## 開発履歴

### v3.1.0 (2025-10-18)
- **画像クリップボードコピー機能追加**: スマホのSlackアプリでも使える
- **自動保存頻度の調整**: 30秒→2分に変更（邪魔にならないように）
- **マルバツ入力のキャンセル機能**: 同じボタンをクリックで選択解除
- **日付計算の修正**: ISO 8601準拠の正確な週番号計算
- **親からのコメント欄追加**: 週1回のコメント記録（表示/非表示切替可能）
- **データ保存の最適化**: localStorageには設定のみ保存
- **コードリファクタリング**: 週計算ロジックの共通化・簡略化

### v3.0.0 (2025-10-17)
- UI/UX大幅改善（スクロール最小化）
- 自動保存機能追加（30秒ごと）
- 未保存変更検知機能
- クリップボードコピー機能（評価表・感想）
- 設定の永続化
- モバイル対応強化

### v2.0.0 (2025-10-15)
- タブナビゲーション統一
- 日別表示革新（週間サマリー・日別ナビゲーション）
- プレビュー表示改善（軸反転）
- レイアウト最適化

### v1.0.0 (2025-10-12)
- 初期リリース
- GitHub同期機能実装
- 基本的な日記入力機能

## ライセンス

MIT License

## 作者

Takashi-home

## リンク

- [GitHub Repository](https://github.com/Takashi-home/Supernote)
- [GitHub Pages](https://takashi-home.github.io/Supernote/)

---

**Note**: このアプリケーションはプライベートな日記データを扱うため、Personal Access Tokenは厳重に管理してください。
